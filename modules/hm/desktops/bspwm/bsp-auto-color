#!/usr/bin/env bash

OUT="${1:-$HOME/.config/bspwm/bsp-auto-color}"
PROC="bsp-app-border"
PID=$(pgrep -n "bsp-app-border")

if [ -z "$PID" ]; then
   bsp-app-border
   notify-send -e -u low -t 2000 "Per App Border Color" "On"
   {
       echo "#!/bin/sh"
       echo "# Autogenerated bspwm config snapshot"
       echo "bsp-app-border"

   } > "$OUT"
   chmod +x "$OUT"
else
   pkill -f "bsp-app-border"
   if [ -f "$HOME/.bsp_conf_color" ]; then
       "$HOME/.bsp_conf_color"
   fi
   notify-send -e -u low -t 2000 "Per App Border Color" "Off"
   {
       echo "#!/bin/sh"
       echo "# Autogenerated bspwm config snapshot"
       echo ""

   } > "$OUT"
   chmod +x "$OUT"
fi

