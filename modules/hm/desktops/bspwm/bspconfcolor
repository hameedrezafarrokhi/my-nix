#!/bin/sh

# Output file (optional)
OUT="${1:-$HOME/.bsp_conf_color}"
COLOR=$(cat $(which bsp-border-color) | grep "$(bspc config focused_border_color)")

# Helper to read a bspwm config value
get() {
    bspc config "$1"
}

{
    echo "#!/bin/sh"
    echo "# Autogenerated bspwm config snapshot"
    echo "# $(date)"
    echo

    if ((COLOR == 0)); then
      echo ""
    else
      echo "bspc config focused_border_color \"$(get focused_border_color)\""
      #echo "bspc config active_border_color \"$(get active_border_color)\""
      #echo "bspc config normal_border_color \"$(get normal_border_color)\""
      #echo "bspc config presel_feedback_color \"$(get presel_feedback_color)\""
    fi

} > "$OUT"

chmod +x "$OUT"

echo "Saved bspwm config snapshot to: $OUT"
